[PreAndPostTradeAnalysis]FPrePostTradeAnalysis:tradeAnalysisState = switch(preTradeAnalysisHasPeriod, 
  true->switch(pendingTradeAnalysisQueries, 
    true->"Updating", 
    false->"Valid"), 
  false->"Invalid");
[PreAndPostTradeAnalysis]FSalesOrder:tradeAnalysisState = prePostTradeAnalysis:tradeAnalysisState;