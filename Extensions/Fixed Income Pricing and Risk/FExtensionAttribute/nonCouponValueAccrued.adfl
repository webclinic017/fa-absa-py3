[Fixed Income Pricing and Risk]FCashFlowInstrument:nonCouponValueAccrued = select(instrumentCurrencies.Size > 1, 
  true->sumOf(convertToCurrency(legs :* "nonCouponValueAccrued", instrumentCurrencies :* "fxSpotRate" [fxToCurrency := currency], currencySymbol)), 
  false->sumOf(legs :* "nonCouponValueAccrued"));
[Fixed Income Pricing and Risk]FLeg:nonCouponValueAccrued = select(canHaveAccruedCashFlows, 
  false->denominatedvalue(0, currency, , ), 
  true->select(isFinite(uniqueCoupon) or staticLegInformation:isAccruingInArrear, 
    false->unitAccrued, 
    true->denominatedvalue(0, currency, , )));