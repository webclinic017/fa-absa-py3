[Fixed Income Pricing and Risk]FInstrument:theoreticalYieldToMaturityAdjusted = select(ytmCalculationValid, 
  true->imply(snoop(theoreticalInstrumentSpotValueCleanFromYieldAdjusted, "yield"), theoreticalInstrumentSpotValueCleanFromYieldAdjusted, theoreticalInstrumentSpotValueCleanForImpliedCalculations, ytmAccuracy, 0, 1.0, 100), 
  false->nil);
[Fixed Income Pricing and Risk]FInstrumentAndTrades:theoreticalYieldToMaturityAdjusted = instrument :* "theoreticalYieldToMaturityAdjusted" [priceSource];
[Fixed Income Pricing and Risk]FMultiInstrumentAndTrades:theoreticalYieldToMaturityAdjusted = nil;