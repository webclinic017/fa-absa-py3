[Fixed Income Pricing and Risk]FCashFlowInstrument:marketYieldToFirst = select(ytmCalculationValid, 
  true->shunt(implyValid, 
    false->nil, 
    true->imply(snoop(theoreticalInstrumentSpotValueCleanFromYieldToFirst, "yield"), theoreticalInstrumentSpotValueCleanFromYieldToFirst, marketUnitValueCleanForImpliedCalculations, ytmAccuracy, -0.5, 1.0, implyMaxIterations)), 
  false->nil);
[Fixed Income Pricing and Risk]FInstrument:marketYieldToFirst = nil;
[Fixed Income Pricing and Risk]FInstrumentAndTrades:marketYieldToFirst = instrument :* "marketYieldToFirst" [priceSource];
[Fixed Income Pricing and Risk]FMultiInstrumentAndTrades:marketYieldToFirst = nil;