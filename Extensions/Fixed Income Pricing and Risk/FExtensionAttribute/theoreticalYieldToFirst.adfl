[Fixed Income Pricing and Risk]FCashFlowInstrument:theoreticalYieldToFirst = select(ytmCalculationValid, 
  true->imply(snoop(theoreticalInstrumentSpotValueCleanFromYieldToFirst, "yield"), theoreticalInstrumentSpotValueCleanFromYieldToFirst, theoreticalInstrumentSpotValueCleanForImpliedCalculations, ytmAccuracy, -0.5, 1.0, implyMaxIterations), 
  false->nil);
[Fixed Income Pricing and Risk]FInstrument:theoreticalYieldToFirst = nil;
[Fixed Income Pricing and Risk]FInstrumentAndTrades:theoreticalYieldToFirst = instrument:theoreticalYieldToFirst;
[Fixed Income Pricing and Risk]FMultiInstrumentAndTrades:theoreticalYieldToFirst = nil;