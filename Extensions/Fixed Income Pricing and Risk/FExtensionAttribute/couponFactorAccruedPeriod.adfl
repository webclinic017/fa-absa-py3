[Fixed Income Pricing and Risk]FCashFlowInstrument:couponFactorAccruedPeriod = sumOf(legs :* "couponFactorAccruedPeriod");
[Fixed Income Pricing and Risk]FLeg:couponFactorAccruedPeriod = select(isFinite(uniqueCoupon) and (not staticLegInformation:isAccruingInArrear), 
  false->0, 
  true->accruedPeriod);