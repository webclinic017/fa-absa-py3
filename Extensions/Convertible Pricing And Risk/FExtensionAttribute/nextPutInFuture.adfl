[Convertible Pricing And Risk]FInstrument:nextPutInFuture = shunt(nextPut, 
  nil->nil, 
  default->shunt(nextPutDate > valuationDate, 
    true->nextPut, 
    false->nil));