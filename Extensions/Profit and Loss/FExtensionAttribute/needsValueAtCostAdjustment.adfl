[Profit and Loss]FInstrumentAndTrades:needsValueAtCostAdjustment = select(portfolio, 
  nil->false, 
  default->portfolio:valueDepositsAtCost or portfolio:valueReposAtCost);
[Profit and Loss]FSingleInstrumentAndTrades:needsValueAtCostAdjustment = instrument :* "isValuedAtCost" [positionObject];