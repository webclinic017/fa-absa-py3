[Profit and Loss]FFxRate:riskPositionForProfitAndLoss = (currencyPairForeignCurrency:moneyMarketCurveForProfitAndLoss [valuationBaseDateTimeInput]).DiscountValuesAsDouble(futurePositions, instrumentSpotOrStartDate);
[Profit and Loss]FInstrument:riskPositionForProfitAndLoss = select(tradesInPosition, 
  nil->0, 
  default->riskPositionBase);