[Profit and Loss]FCashFlowInstrument:combinationDiscountOrRiskFreeCurvesForProfitAndLossMoveValue = select(isCredit, 
  true->riskFreeDiscountCurvesForProfitAndLoss, 
  false->discountCurvesForProfitAndLoss);
[Profit and Loss]FCombInstrMap:combinationDiscountOrRiskFreeCurvesForProfitAndLossMoveValue = instrument:combinationDiscountOrRiskFreeCurvesForProfitAndLossMoveValue [valuationBaseDateTimeInput];
[Profit and Loss]FCombination:combinationDiscountOrRiskFreeCurvesForProfitAndLossMoveValue = (instrumentMaps :* "combinationDiscountOrRiskFreeCurvesForProfitAndLossMoveValue" [valuationBaseDateTimeInput]).Flatten;
[Profit and Loss]FInstrument:combinationDiscountOrRiskFreeCurvesForProfitAndLossMoveValue = nil;