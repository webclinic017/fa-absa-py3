[Profit and Loss]FInstrumentAndTrades:valueAtCostTheoreticalValueAdjustmentEnd = select(needsValueAtCostAdjustment, 
  true->valueAtCostLive + stripDateTimePart(valueAtCostTheoreticalValuesAdjustment), 
  false->plZero);