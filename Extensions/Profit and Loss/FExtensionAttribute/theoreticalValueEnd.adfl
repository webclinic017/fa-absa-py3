[Profit and Loss]FInstrumentAndTrades:theoreticalValueEnd = select(needsValueAtCostAdjustment, 
  true->theoreticalValue + valueAtCostTheoreticalValueAdjustmentEnd, 
  false->theoreticalValue);