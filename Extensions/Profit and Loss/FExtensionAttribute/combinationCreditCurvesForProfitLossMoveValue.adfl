[Profit and Loss]FCashFlowInstrument:combinationCreditCurvesForProfitLossMoveValue = select(isCredit, 
  true->legs :* "creditCurveForProfitAndLoss" [valuationBaseDateTimeInput], 
  false->legs :* "nilObject");
[Profit and Loss]FCombInstrMap:combinationCreditCurvesForProfitLossMoveValue = instrument:combinationCreditCurvesForProfitLossMoveValue [valuationBaseDateTimeInput];
[Profit and Loss]FCombination:combinationCreditCurvesForProfitLossMoveValue = (instrumentMaps :* "combinationCreditCurvesForProfitLossMoveValue" [valuationBaseDateTimeInput]).Flatten;
[Profit and Loss]FInstrument:combinationCreditCurvesForProfitLossMoveValue = nil;