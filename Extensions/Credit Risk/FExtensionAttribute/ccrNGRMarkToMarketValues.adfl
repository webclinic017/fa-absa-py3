[Credit Risk]FCreditBalance:ccrNGRMarkToMarketValues = balancePortfolioInstrumentAndTrades:ccrNGRMarkToMarketValue [displayCurrency := forwardFXConversionCurrency, forwardFxRateConversion := true];
[Credit Risk]FInstrument:ccrNGRMarkToMarketValues = discountAndConvertToCurrency(markToMarketValuesUndiscounted, discountAndConvertToBaseForwardFXConversionMoneyMarketCurve, discountAndConvertToBaseDate, 1.0, forwardFXConversionCurrencySymbol, filterUnit, discountAndConvertToBaseForwardFXConversionCurves, discountAndConvertToBaseForwardFXConversionFXRatesForProfitAndLoss, forwardFXConversionCurrencySymbol);
[Credit Risk]FMultiInstrumentAndTrades:ccrNGRMarkToMarketValues = sumOf(openInstruments :* "collapse(ccrNGRMarkToMarketValues)" [priceSource, isSplitAllGrouped, valuesOnSpotOverride, positionObject, useMarkToMarketPriceToday, useFallbackToTheoreticalValues, profitAndLossParameters, filterUnit, groupingSpotDiscountDate, plSpotGroupingReference, profitAndLossFXRateDate := profitAndLossFXRateDateForForwardFxRateConversion, openPositions, onlySpotValuedInstruments]);