[_convertible_pricing_and_risk_exts]FInstrument:bondOnlyDuration = select(ytmCalculationValid, 
  true->bondOnlyDurationFromBondOnlyModifiedDuration, 
  false->nan);
[_convertible_pricing_and_risk_exts]FInstrumentAndTrades:bondOnlyDuration = instrument :* "bondOnlyDuration" [priceSource];
[_convertible_pricing_and_risk_exts]FMultiInstrumentAndTrades:bondOnlyDuration = nan;
[_convertible_pricing_and_risk_exts]FPriceAggregate:bondOnlyDuration = instrument:bondOnlyDuration;