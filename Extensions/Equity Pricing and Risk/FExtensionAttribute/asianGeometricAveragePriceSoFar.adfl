[Equity Pricing and Risk]FInstrument:asianGeometricAveragePriceSoFar = select(useAveragePriceDates, 
  true->asianAverage(asianHistoricalAveragePriceEvents, asianPriceWeight, unit(storedStrike), datetime(storedStrike), false), 
  default->1.0);