[Equity Pricing and Risk]FInstrument:marketSpotValueAsUnderlying = select(isPerUnitQuoted, 
  true->object.UnitQuoteToUnitValue(marketPrice), 
  false->object:quoteConversionWrapperQuoteToUnitValue [quoteConversionWrapperFromQuote = marketPrice, priceSource, doSplitAll]);