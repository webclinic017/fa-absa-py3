[Equity Pricing and Risk]FCombInstrMap:rainbowUnderlyingVolatility = instrument:rainbowUnderlyingVolatility [optionParent, rainbowUnderlyingWeightForVolatilityStrikePrice];
[Equity Pricing and Risk]FInstrument:rainbowUnderlyingVolatility = select(volatilityInformationHasGenericValueFunction, 
  true->volatilityInformation:volatilityValue [volatilityValueVolatilityInformation = volatilityInformation, volatilityValueExpiryDate = optionParent:expiryDate, volatilityValueUnderlyingMaturity = 0, volatilityValueStrikePrice = multiUnderlyingComponentSpotToForwardStartVolatilityStrikePrice / rainbowUnderlyingWeightForVolatilityStrikePrice, volatilityValueCallPutType = optionParent:callPutTypeForVolatility, volatilityValueInputToSurfaceStrikeConverters = surfaceDependentMultiVolatilityStrikeConverter, priceSource, doSplitAll], 
  false->volatilityInformation.Value(0, optionParent:expiryDate, optionParent:strikeValue / rainbowUnderlyingWeightForVolatilityStrikePrice, optionParent:isCall, false, true, multiUnderlyingComponentForwardPriceForVolatility, skewExpiriesMultiComponentForwardPriceForVolatility, 0, 0));