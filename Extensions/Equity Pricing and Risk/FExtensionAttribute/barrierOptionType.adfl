[Equity Pricing and Risk]FInstrument:barrierOptionType = nil;
[Equity Pricing and Risk]FInstrumentAndTrades:barrierOptionType = instrument:barrierOptionType;
[Equity Pricing and Risk]FMultiInstrumentAndTrades:barrierOptionType = nil;
[Equity Pricing and Risk]FOption:barrierOptionType = select(isBarrierOption, 
  true->exotic.BarrierOptionType, 
  default->nil);
[Equity Pricing and Risk]FPriceAggregate:barrierOptionType = instrument:barrierOptionType;