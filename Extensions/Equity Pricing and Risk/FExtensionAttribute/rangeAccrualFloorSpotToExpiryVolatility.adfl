[Equity Pricing and Risk]FOption:rangeAccrualFloorSpotToExpiryVolatility = select(useCompoAdjustmentForVolatility, 
  true->compoAdjustedVolatility(object:volatilityStructureValue [mappingObject := underlying, volatilityStrikePrice = rangeAccrualFloorCompoAdjusted, calculationCurrency := underlyingCurrency, expiryDate = rangeAccrualExpiryDates, carryEndDate = rangeAccrualCarryEndDates, absoluteStrikePriceForVolatilityStrike = rangeAccrualFloor, priceSource, doSplitAll, forwardValuationInInstrumentCurrency := false], object:fxVolatilityForCompoAdjustmentForwardStart [forwardStartDateTime = rangeAccrualExpiryDates], compoCorrelation), 
  false->object:volatilityStructureValue [expiryDate = rangeAccrualExpiryDates, volatilityStrikePrice = rangeAccrualFloor, carryEndDate = rangeAccrualCarryEndDates, absoluteStrikePriceForVolatilityStrike = rangeAccrualFloor, priceSource, doSplitAll]);