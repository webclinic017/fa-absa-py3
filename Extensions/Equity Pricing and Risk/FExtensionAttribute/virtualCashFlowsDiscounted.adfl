[Equity Pricing and Risk]FLeg:virtualCashFlowsDiscounted = select(payTypeForward, 
  true->collapse(projectedVirtualCashFlows), 
  false->discountCurve.DiscountValues(projectedVirtualCashFlows, valuationDate));