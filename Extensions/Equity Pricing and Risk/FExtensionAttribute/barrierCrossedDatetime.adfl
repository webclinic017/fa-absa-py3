[Equity Pricing and Risk]FInstrument:barrierCrossedDatetime = nil;
[Equity Pricing and Risk]FInstrumentAndTrades:barrierCrossedDatetime = instrument:barrierCrossedDatetime;
[Equity Pricing and Risk]FMultiInstrumentAndTrades:barrierCrossedDatetime = nil;
[Equity Pricing and Risk]FOption:barrierCrossedDatetime = select(isBarrierOption, 
  true->exotic.BarrierCrossDate, 
  false->nil);
[Equity Pricing and Risk]FPriceAggregate:barrierCrossedDatetime = instrument:barrierCrossedDatetime;