[Default]FObject:QuoteAndHedgeYieldDeltaNeutral

Properties =
  Abstract=No
  CanBePaused=No
  CanBeRestarted=Yes
  CreatePermission=User
  DisplayName=Yield Delta Neutral
  EditPermission=User
  Granularity=10
  InheritsFrom=QuoteAndHedgeYieldSpread
  StartState=Start
  StoreTraceLog=No
  TradingEnabled=Yes

Transitions =

Panel PriceRatio =
  DisplayName=
  Orientation=Vertical
  Variables=quoteAndHedgeQuantityRatio

Panel QuantityRatio =
  DisplayName=
  Orientation=Vertical
  Variables=quantityRatioType, hedgeQuantityMultiplier

Enums =
  EnumYieldDeltaNeutralQuantityRatioType=Hedge Leg Yield Delta / Quote Leg Yield Delta

Conditions =

Actions =

ActionLists =

Variable hedgeLegBuyOrSell =
  Description=Buy or sell opposite to the quote leg, depending on the Yield Delta Ratio
  DisplayName=Hedge Buy/Sell
  Domain=enum(BuyOrSell)
  Type=ReadOnly
  Value=switch(hedgeDeltaBasedQuantity, \
      nil->switch(quoteLegIsSell, \
        true->"Buy", \
        false->"Sell"), \
      default->switch("Buy" == quoteLegBuyOrSell, \
        true->switch(hedgeDeltaBasedQuantity > 0, \
          true->"Sell", \
          default->"Buy"), \
        false->switch(hedgeDeltaBasedQuantity > 0, \
          true->"Buy", \
          default->"Sell")))

Variable hedgeQuantityMultiplier =
  Description=This factor is multiplied to the resulting hedge volume before the hedge order is sent. E.g a value of 0.8 will make a underhedge of 20%, and a value of 1.25 will overhedge with 25% more hedge volume.
  DisplayName=Hedge Quantity Multiplier
  Domain=double
  Mandatory=No
  Type=Input
  Value=1.0

Variable quantityRatioType =
  Domain=EnumYieldDeltaNeutralQuantityRatioType
  Type=Private
  Value="Hedge Leg Yield Delta / Quote Leg Yield Delta"

Variable quoteAndHedgeQuantityRatio =
  Description=Quantity scaling factor between the quote and hedge leg
  DisplayName=Quantity Ratio
  Domain=double
  Type=Private
  Value=abs(hedgeDeltaBasedQuantity)

ParameterRule RuleHedgeQuantityMultiplierGreaterThanZero =
  Behavior=Validate
  ErrorMessage=Hedge Quantity Multiplier must be greater than zero.
  Expression=object.HedgeQuantityMultiplier > 0.0

<end>
