[Default]FBond:lowerBoundForTheoreticalPriceImpliedFlatYieldSpread = select(isCallable, 
  true->select((theoreticalPrice < theoreticalPriceRiskFree) or almostZero(theoreticalPrice - theoreticalPriceRiskFree, 1e-08), 
    true->0.0, 
    default->-theoreticalYieldToMaturityRiskFreeNoCall), 
  default->lowerBoundForTheoreticalPriceImpliedFlatYieldSpreadDefault);
[Default]FInstrument:lowerBoundForTheoreticalPriceImpliedFlatYieldSpread = lowerBoundForTheoreticalPriceImpliedFlatYieldSpreadDefault;