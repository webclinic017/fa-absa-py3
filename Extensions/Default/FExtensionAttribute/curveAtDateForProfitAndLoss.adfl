[Default]FUndefinedObject:curveAtDateForProfitAndLoss[valuationBaseDateTimeInput, curve] = shunt[valuationBaseDateTimeInput, curve](valuationDate == valuationSystemDate, 
  true->select(profitAndLossTodayIsHistorical, 
    true->scenariodropaxis(curve, <"valuationBaseDateTimeInput", , , valuationBaseDateTimeInput>, <"liveOrSnapshotParameterDate", , , valuationBaseDateTimeInput>), 
    false->curve), 
  false->shiftdropaxis(curve, snoop(curve, "valuationBaseDateTimeInput"), [valuationBaseDateTimeInput]));