[Default]FSettlement:premiumNominalAmount = select(object.Type, 
  "Security Nominal"->select(isPartOfDvP and (instrument <> nil), 
    true->select(instrument.IsSecurity, 
      true->-settlementAmount, 
      false->nil), 
    false->nil), 
  "Security DvP"->select(premiumNominalAmountChildrenNilRemoved.IsEmpty, 
    true->nil, 
    false->sumOf(premiumNominalAmountChildrenNilRemoved)), 
  default->nil);