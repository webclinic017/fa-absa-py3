[Default]FFxRate:riskPositionForProfitAndLoss = (currencyPairForeignCurrency:moneyMarketCurveForProfitAndLoss [valuationBaseDateTimeInput]).DiscountValuesAsDouble(futurePositions, instrumentSpotOrStartDate);
[Default]FInstrument:riskPositionForProfitAndLoss = select(tradesInPosition, 
  nil->0, 
  default->riskPositionBase);