[Default]FCashFlowInstrument:combinationCreditCurvesForProfitLossMoveValue = select(isCredit, 
  true->legs :* "creditCurveForProfitAndLoss" [valuationBaseDateTimeInput], 
  false->legs :* "nilObject");
[Default]FCombInstrMap:combinationCreditCurvesForProfitLossMoveValue = instrument:combinationCreditCurvesForProfitLossMoveValue [valuationBaseDateTimeInput];
[Default]FCombination:combinationCreditCurvesForProfitLossMoveValue = (instrumentMaps :* "combinationCreditCurvesForProfitLossMoveValue" [valuationBaseDateTimeInput]).Flatten;
[Default]FInstrument:combinationCreditCurvesForProfitLossMoveValue = nil;