[Default]FCashFlowInstrument:forwardValuationWeightAdjustedStaticLegInformation[legCurrencyFilterProvider, forwardValuationWeightFactor] = forwardValuationLegs :* "forwardValuationWeightAdjustedStaticLegInformation" [forwardValuationWeightFactor];
[Default]FCombInstrMap:forwardValuationWeightAdjustedStaticLegInformation[legCurrencyFilterProvider, forwardValuationWeightFactor] = instrument:forwardValuationWeightAdjustedStaticLegInformation [legCurrencyFilterProvider, forwardValuationWeightFactor = forwardValuationWeightFactor * object.Weight * instrument:contractSize];
[Default]FCombination:forwardValuationWeightAdjustedStaticLegInformation[legCurrencyFilterProvider, forwardValuationWeightFactor] = (instrumentMapsWithLegs :* "forwardValuationWeightAdjustedStaticLegInformation" [legCurrencyFilterProvider, forwardValuationWeightFactor = forwardValuationWeightFactor * invertedFactor / contractSize]).Flatten;
[Default]FInstrument:forwardValuationWeightAdjustedStaticLegInformation = nil;
[Default]FLeg:forwardValuationWeightAdjustedStaticLegInformation[forwardValuationWeightFactor] = staticLegInformation.WeightAdjustedStaticLegInformation(forwardValuationWeightFactor, false);