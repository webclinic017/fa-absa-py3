[Default]FInstrumentAndTrades:valueAtCostMarketValuesAdjustmentEnd = shunt(profitAndLossEndDateIsToday, 
  true->convertToCurrency(valueAtCostMarketInstrumentPositionValuesAdjustment, theoreticalValueFxRates, displayCurrencySymbol), 
  false->convertToCurrency(shiftdropaxis(valueAtCostMarketInstrumentPositionValuesAdjustmentForProfitLoss, snoop(valueAtCostMarketInstrumentPositionValuesAdjustmentForProfitLoss, "valuationBaseDateTimeInput"), [profitAndLossEndDateTime]), profitAndLossEndFXRates, displayCurrencySymbol, filterUnit));