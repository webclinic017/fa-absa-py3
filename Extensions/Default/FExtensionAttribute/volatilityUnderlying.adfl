[Default]FAverageOption:volatilityUnderlying = firstLeg:fixingInstrument [priceSource];
[Default]FInstrument:volatilityUnderlying = select(isReciprocal, 
  true->collapse(normalFxRate), 
  false->collapse(valuationUnderlyingOrSelf));