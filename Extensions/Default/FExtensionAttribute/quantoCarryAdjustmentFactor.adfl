[Default]FCashFlowInstrument:quantoCarryAdjustmentFactor = 0.0;
[Default]FDerivative:quantoCarryAdjustmentFactor = select(monteCarloSimulationIsMultiUnderlying, 
  false->select(isQuanto, 
    true->underlyingFXCorrelation * volatilityForQuantoAdjustedCarryCost * fxVolatilityForQuantoAdjustedCarryCost, 
    false->0.0), 
  true->monteCarloSimulationObservables :* "multiUnderlyingComponentQuantoCarryAdjustmentRate" [optionParent, correlationMatrix, priceSource, carryStartDate, carryEndDate, expiryDate, multiUnderlyingPayCurrency := (underlying:currency), isQuanto]);