[Default]FInstrument:averageStrikeSoFarWithoutFactor = nil;
[Default]FOption:averageStrikeSoFarWithoutFactor = select(isAsian, 
  false->nil, 
  default->select(isOptionValuedAsPureSingle or mappedModelIsBasketAsSingleUnderlying, 
    true->denominatedvalue(asianArithmeticAverageStrikeSoFar, unit(strikeValue), , expiryDate), 
    false->asianBasketArithmeticAverageStrikeSoFar));