[Default]FCashFlowInstrument:forwardValuationHazardFactors = forwardValuationLegs :* "collapse(theoreticalLegValueHazardFactors)" [creditHazardFactorsRightDate = smallDate, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint];
[Default]FCombInstrMap:forwardValuationHazardFactors[legCurrencyFilterProvider, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint] = instrument:forwardValuationHazardFactors [legCurrencyFilterProvider, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint];
[Default]FCombination:forwardValuationHazardFactors[legCurrencyFilterProvider, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint] = flattenHazardFactors(instrumentMapsWithLegs :* "forwardValuationHazardFactors" [legCurrencyFilterProvider, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint]);
[Default]FInstrument:forwardValuationHazardFactors = nil;