[Default]FOption:rangeAccrualCapSpotToExpiryVolatility = select(useCompoAdjustmentForVolatility, 
  true->compoAdjustedVolatility(object:volatilityStructureValue [mappingObject := underlying, volatilityStrikePrice = rangeAccrualCapCompoAdjusted, calculationCurrency := underlyingCurrency, expiryDate = rangeAccrualExpiryDates, carryEndDate = rangeAccrualCarryEndDates, absoluteStrikePriceForVolatilityStrike = rangeAccrualCap, priceSource, doSplitAll, forwardValuationInInstrumentCurrency := false], object:fxVolatilityForCompoAdjustmentForwardStart [forwardStartDateTime = rangeAccrualExpiryDates], compoCorrelation), 
  false->object:volatilityStructureValue [expiryDate = rangeAccrualExpiryDates, carryEndDate = rangeAccrualCarryEndDates, volatilityStrikePrice = rangeAccrualCap, absoluteStrikePriceForVolatilityStrike = rangeAccrualCap, priceSource, doSplitAll]);