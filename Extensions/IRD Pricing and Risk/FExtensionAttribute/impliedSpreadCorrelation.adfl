[IRD Pricing and Risk]FInstrument:impliedSpreadCorrelation = shunt(implyValid and (snoop(theoreticalPrice, "spreadCorrelationForLeg") <> nil), 
  false->nil, 
  true->imply(snoop(theoreticalPrice, "spreadCorrelationForLeg"), theoreticalPrice, marketPrice, implyPrecision, -1.0, 1.0, implyMaxIterations));
[IRD Pricing and Risk]FInstrumentAndTrades:impliedSpreadCorrelation = instrument :* "impliedSpreadCorrelation" [priceSource];
[IRD Pricing and Risk]FMultiInstrumentAndTrades:impliedSpreadCorrelation = nil;