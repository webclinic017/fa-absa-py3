[IRD Pricing and Risk]FCashFlowInstrument:embeddedOptionSpotValues = shunt[contractSize, positionTradeQuantities, priceSource, legs, valuesOnSpotOverride](movePositionType, 
  None->positionValue(positionTradeQuantities, theoreticalInstrumentComponentValue, contractSize, timeDistributionFactor), 
  Repo->(movePositionValueRepo(theoreticalInstrumentComponentValue, positionTradeQuantities, valuationDate, valuationOrSpotDate, repoCurve, moneyMarketCurve, instrumentSpotOrStartDate) * contractSize), 
  Full->embeddedOptionInstrumentPositionValues, 
  default->nil);
[IRD Pricing and Risk]FInstrument:embeddedOptionSpotValues = instrumentSpotZero;