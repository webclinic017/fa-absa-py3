[Credit Pricing and Risk]FInstrument:survivalProbability = select(isCreditOption or payContingent and not underlying:isCreditBasket, 
  true->underlying:creditCurve.SurvivalProbability(valuationDate, payDate), 
  false->1.0);