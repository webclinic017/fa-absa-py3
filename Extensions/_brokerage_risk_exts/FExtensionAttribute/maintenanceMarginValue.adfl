[_brokerage_risk_exts]FCurrency:maintenanceMarginValue = nil;
[_brokerage_risk_exts]FInstrument:maintenanceMarginValue = shunt((collateralPosition == 0) and (portfolio:portfolioType <> "Cash Account") and not (spanInstruments.HasKey(object.Oid)), 
  true->shunt(maintenanceMarginCondition <> nil, 
    true->maintenanceMarginCurve.MinValue / 100, 
    false->1), 
  false->nil);
[_brokerage_risk_exts]FSingleInstrumentAndTrades:maintenanceMarginValue = instrument:maintenanceMarginValue [portfolio, positionObject];