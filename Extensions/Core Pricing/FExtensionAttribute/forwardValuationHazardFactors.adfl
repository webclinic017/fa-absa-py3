[Core Pricing]FCashFlowInstrument:forwardValuationHazardFactors = forwardValuationLegs :* "collapse(theoreticalLegValueHazardFactors)" [creditHazardFactorsRightDate = smallDate, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint];
[Core Pricing]FCombInstrMap:forwardValuationHazardFactors[legCurrencyFilterProvider, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint] = instrument:forwardValuationHazardFactors [legCurrencyFilterProvider, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint];
[Core Pricing]FCombination:forwardValuationHazardFactors[legCurrencyFilterProvider, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint] = flattenHazardFactors(instrumentMapsWithLegs :* "forwardValuationHazardFactors" [legCurrencyFilterProvider, useRiskFreeDiscounting, forwardValuationPeriod, forwardValuationStartPoint]);
[Core Pricing]FInstrument:forwardValuationHazardFactors = nil;