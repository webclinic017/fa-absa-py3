[Core Pricing]FInstrument:underlyingPriceInTheoreticalPriceTransformImpl = select(isReciprocalForUnderlyingPrice, 
  true->denominatedvalue(inv(underlyingPriceInTheoreticalPriceConverted), underlyingForUnderlyingPriceInTheoreticalPrice:foreignCurrency, nil, datetime(underlyingPriceInTheoreticalPriceConverted)), 
  default->underlyingPriceInTheoreticalPriceConverted);
[Core Pricing]FMultiInstrumentAndTrades:underlyingPriceInTheoreticalPriceTransformImpl = underlyingPriceInTheoreticalPriceConverted;