[Core Pricing]FCashFlowInstrument:forwardValuationWeightAdjustedStaticLegInformation[legCurrencyFilterProvider, forwardValuationWeightFactor] = forwardValuationLegs :* "forwardValuationWeightAdjustedStaticLegInformation" [forwardValuationWeightFactor];
[Core Pricing]FCombInstrMap:forwardValuationWeightAdjustedStaticLegInformation[legCurrencyFilterProvider, forwardValuationWeightFactor] = instrument:forwardValuationWeightAdjustedStaticLegInformation [legCurrencyFilterProvider, forwardValuationWeightFactor = forwardValuationWeightFactor * object.Weight * instrument:contractSize];
[Core Pricing]FCombination:forwardValuationWeightAdjustedStaticLegInformation[legCurrencyFilterProvider, forwardValuationWeightFactor] = (instrumentMapsWithLegs :* "forwardValuationWeightAdjustedStaticLegInformation" [legCurrencyFilterProvider, forwardValuationWeightFactor = forwardValuationWeightFactor * invertedFactor / contractSize]).Flatten;
[Core Pricing]FInstrument:forwardValuationWeightAdjustedStaticLegInformation = nil;
[Core Pricing]FLeg:forwardValuationWeightAdjustedStaticLegInformation[forwardValuationWeightFactor] = staticLegInformation.WeightAdjustedStaticLegInformation(forwardValuationWeightFactor, false);