[Core Pricing]FCombInstrMap:marketSpotValueBid = (instrumentCurrency:discountCurve).DiscountValue(instrument :* "marketSpotValueBid" [priceSource], combination:instrumentSpotDate);
[Core Pricing]FCombination:marketSpotValueBid = select(splitCombinationPrice, 
  true->sumOf((instrumentMaps) :* "marketSpotValueBid * object.Weight * instrument:contractSize * fxLegToInstrument" [priceSource, doSplitAll]) / combinationDivisionFactor, 
  false->object:quoteConversionWrapperQuoteToUnitValue [quoteConversionWrapperFromQuotation = pricingQuotation, quoteConversionWrapperFromQuote = marketPriceBid, quoteConversionWrapperDoRounding = true, priceSource, doSplitAll]);
[Core Pricing]FCurrency:marketSpotValueBid = marketSpotValue;
[Core Pricing]FInstrument:marketSpotValueBid = select(pricingCurrency == currency, 
  true->object:quoteConversionWrapperQuoteToUnitValue [quoteConversionWrapperFromQuotation = pricingQuotation, quoteConversionWrapperFromQuote = marketPriceBid, quoteConversionWrapperDoRounding = true, priceSource, doSplitAll], 
  false->object:quoteConversionWrapperQuoteToUnitValue [quoteConversionWrapperFromQuotation = pricingQuotation, quoteConversionWrapperFromQuote = marketPriceBid, quoteConversionWrapperDoRounding = true, priceSource, doSplitAll] * fxMarketToInstrument);