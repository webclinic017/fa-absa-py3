[Core Pricing]FCashFlowInstrument:forwardValuationDiscountCurves[useBESADiscounting, useRiskFreeDiscounting, legCurrencyFilterProvider, legs] = forwardValuationLegs :* "collapse(theoreticalLegValueCurve)" [useBESADiscounting, useRiskFreeDiscounting];
[Core Pricing]FCombInstrMap:forwardValuationDiscountCurves[useBESADiscounting, useRiskFreeDiscounting, legCurrencyFilterProvider] = instrument:forwardValuationDiscountCurves [useBESADiscounting, useRiskFreeDiscounting, legCurrencyFilterProvider];
[Core Pricing]FCombination:forwardValuationDiscountCurves[useBESADiscounting, useRiskFreeDiscounting, legCurrencyFilterProvider] = (instrumentMapsWithLegs :* "forwardValuationDiscountCurves" [useBESADiscounting, useRiskFreeDiscounting, legCurrencyFilterProvider]).Flatten;
[Core Pricing]FInstrument:forwardValuationDiscountCurves = nil;