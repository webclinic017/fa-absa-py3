[Core Pricing]FInstrument:underlyingForwardValueForAfterExpiry = select(isCashSettled, 
  false->underlying:forwardValue [startValueForForwardValueCalculation = underlyingSpotValueAsUnderlyingOnExpiryDayForAfterExpiryValuation, forwardValueDate = carryEndDate], 
  true->underlyingSpotValueAsUnderlyingOnExpiryDayForAfterExpiryValuation);