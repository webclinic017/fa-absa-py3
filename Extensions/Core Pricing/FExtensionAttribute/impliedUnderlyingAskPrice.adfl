[Core Pricing]FOrderBook:impliedUnderlyingAskPrice = select(underlying, 
  nil->imply(underlyingPriceInTheoreticalPrice, theoreticalPrice, (pricingPriceFeedMarketOrADS :* "marketPriceAskOrBid")), 
  default->imply(underlyingPriceInTheoreticalPrice, theoreticalPrice, (pricingPriceFeedMarketOrADS :* "marketPriceAskOrBid")) * double(instrument:underlyingPriceInTheoreticalPriceFxUnderlyingToCalculation));
[Core Pricing]FPriceAggregate:impliedUnderlyingAskPrice = select(underlying, 
  nil->imply(underlyingPriceInTheoreticalPrice, theoreticalPrice, (pricingPriceFeedMarketOrADS :* "marketPriceAskOrBid")), 
  default->imply(underlyingPriceInTheoreticalPrice, theoreticalPrice, (pricingPriceFeedMarketOrADS :* "marketPriceAskOrBid")) * double(instrument:underlyingPriceInTheoreticalPriceFxUnderlyingToCalculation));