[Core Pricing]FInstrument:valuationDateRightDate = select(settlementPayType, 
  "Spot"->valuationDate, 
  default->object.ValueDateToRightDate(valuationDate));
[Core Pricing]FLeg:valuationDateRightDate = instrument:valuationDateRightDate;