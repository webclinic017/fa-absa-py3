[Core Risk]FInstrumentAndTrades:vegaWeighted = convertToCurrency(vegaValuesWeighted, theoreticalValueFxRates, displayCurrencySymbol);
[Core Risk]FPriceAggregate:vegaWeighted = switch(singleInstrumentAndTrades, 
  nil->0.0, 
  default->singleInstrumentAndTrades :* "vegaWeighted" [priceSource]);
[Core Risk]FTimeBucketAndObject:vegaWeighted = scenarioaxisarray(rowInstrumentAndTrades:vegaWeighted [displayCurrency, volatilityGreekGroupingSensitive], timeDistributionPerimeterNames, <["timeDistributionDateRule"], , , "ExpiryDate">, <["timeDistributionBucket"], , , timeBucketCollection>, <["timeApportionmentType"], , , timeApportionmentTypeSelected>)[timeBucketCollectionIndex];