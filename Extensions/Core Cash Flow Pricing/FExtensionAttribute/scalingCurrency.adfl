[Core Cash Flow Pricing]FAbstractReset:scalingCurrency = select(leg:nominalScalingEstimateType, 
  "Dividend"->instrument:currency, 
  "Dividend Initial Price"->instrument:currency, 
  default->leg:scalingCurrency);
[Core Cash Flow Pricing]FCashFlowMoneyFlow:scalingCurrency[] = leg:scalingCurrency;
[Core Cash Flow Pricing]FLeg:scalingCurrency = object.ScalingCurrency;
[Core Cash Flow Pricing]FMoneyFlow:scalingCurrency = nil;