[Automated Trading]FObject:QuoteAndHedgeBasketSpread

Properties =
  Abstract=No
  CreatePermission=User
  DisplayName=Basket Spread
  EditPermission=User
  InheritsFrom=QuoteAndHedge
  TradingEnabled=Yes

Transitions =

Panel HedgeLeg =
  DisplayName=Hedge Leg
  Orientation=Vertical
  Variables=hedgeLegBuyOrSell, hedgeLegCombination, hedgeOrderAccount, hedgeOrderReference, sendHedgeOrders

Panel InputParams1 =
  DisplayName=
  Orientation=Vertical
  Variables=quantityToQuote, quoteAndHedgePriceSpread

Panel InputParams2 =
  DisplayName=
  Orientation=Vertical
  Panels=QuoteQuantityParams, PriceSpreadParams

Panel Performance =
  DisplayName=Performance
  Orientation=Vertical
  Variables=quoteLegPosition, hedgeLegPosition, donePriceRatio, donePriceSpread, quoteLegAveragePrice, hedgeLegAveragePrice

Panel PriceSpreadParams =
  DisplayName=
  Orientation=Horizontal
  Variables=priceSpreadCurrency, priceSpreadUnit

Panel QuoteQuantityParams =
  DisplayName=
  Orientation=Horizontal
  Variables=quoteLegTotalQuantity

Conditions =

Actions =
  SaveHedgeOrderPrice=hedgeLegMarketPrice => hedgeOrderPrice

ActionLists =

Variable donePriceRatio =
  Description=The average price ratio (only applicable when price spread is 0).
  DisplayName=Done Price Ratio
  Domain=double
  Type=ReadOnly
  Value=switch((hedgeLegAveragePrice > 0) and (quoteAndHedgePriceSpread == 0), \
      true->(hedgeLegAveragePrice * fxRateFromHedgeToQuote) / quoteLegAveragePrice, \
      default->nan)

Variable donePriceSpread =
  Description=The average spread of the filled quote and hedge orders
  DisplayName=Done Price Spread
  Domain=double
  Type=ReadOnly
  Value=switch(hedgeLegAveragePrice > 0, \
      true->quoteLegAveragePrice - (hedgeLegAveragePrice * fxRateFromHedgeToQuote / quoteAndHedgePriceRatio), \
      default->nan)

Variable hedgeLegCombination =
  Description=Drag or Insert a combination
  DisplayName=Hedge Combination
  Domain=FCombination
  Mandatory=Yes
  Type=InputFixed
  Value=

Variable hedgeLegOrderBook =
  Description=The Hedge Order Book created from the hedge combination.
  DisplayName=Hedge Order Book
  Domain=FBasketTradingInterface
  Type=Private
  Value=

Variable priceSpreadCurrency =
  Domain=FCurrency
  Type=ReadOnly
  Value=switch(priceSpreadUnit, \
      "In Quote Leg"->quoteLegUsedOrderBook.Currency, \
      "In Hedge Leg"->hedgeLegUsedOrderBook.Currency)

Variable priceSpreadUnit =
  Domain=EnumPriceSpreadUnit
  Mandatory=No
  Type=Input
  Value="In Quote Leg"

Variable quoteAndHedgePriceSpread =
  Description=The price spread between the quote and hedge leg. Defined as quote price - hedge price.
  DisplayName=Price Spread
  Domain=double
  Mandatory=No
  Type=Input
  Value=0.0

<end>
