[Automated Trading]FObject:QuoteAndHedgeRightIssue

Properties =
  Abstract=No
  CreatePermission=User
  DisplayName=Right Issue
  EditPermission=User
  InheritsFrom=QuoteAndHedge
  TradingEnabled=Yes

Transitions =

Panel InformationParameters =
  DisplayName=Information Parameters
  Orientation=Vertical
  Variables=quoteLegCalculatedQuantityDisplay, hedgeLegMarketPriceDisplay, quoteLegCalculatedPriceDisplay, quoteAndHedgePriceSpread, quoteLegContractSize

Panel InputParams1 =
  DisplayName=
  Orientation=Vertical
  Variables=quantityToQuote, quoteAndHedgeMargin

Panel InputParams2 =
  DisplayName=
  Orientation=Vertical
  Panels=QuoteQuantityParams, PriceSpreadParams

Panel Performance =
  DisplayName=Performance
  Orientation=Vertical
  Variables=quoteLegPosition, hedgeLegPosition, donePriceRatio, donePriceSpread, quoteLegAveragePrice, hedgeLegAveragePrice

Panel PriceSpreadParams =
  DisplayName=
  Orientation=Horizontal
  Variables=priceSpreadCurrency, priceSpreadUnit

Panel QuoteQuantityParams =
  DisplayName=
  Orientation=Horizontal
  Variables=quoteLegTotalQuantity

Conditions =

Actions =

ActionLists =

Variable donePriceRatio =
  Description=The average price ratio (only applicable when price spread is 0).
  DisplayName=Done Price Ratio
  Domain=double
  Type=ReadOnly
  Value=switch((hedgeLegAveragePrice > 0) and (quoteAndHedgePriceSpread == 0), \
      true->(hedgeLegAveragePrice * fxRateFromHedgeToQuote) / quoteLegAveragePrice, \
      default->nan)

Variable donePriceSpread =
  Description=The average spread of the filled quote and hedge orders
  DisplayName=Done Price Spread
  Domain=double
  Type=ReadOnly
  Value=switch(hedgeLegAveragePrice > 0, \
      true->quoteLegAveragePrice - (hedgeLegAveragePrice * fxRateFromHedgeToQuote / quoteAndHedgePriceRatio), \
      default->nan)

Variable hedgeLegOrderBook =
  Description=The hedge order book
  DisplayName=Hedge Order Book
  Domain=FTradingInterface
  Type=ReadOnly
  Value=quoteLegUsedOrderBook :* "underlying:defaultTrading"

Variable priceSpreadCurrency =
  Domain=FCurrency
  Type=ReadOnly
  Value=quoteLegUsedOrderBook.Currency

Variable priceSpreadUnit =
  Domain=EnumPriceSpreadUnit
  Type=ReadOnly
  Value="In Quote Leg"

Variable quoteAndHedgeMargin =
  Description=The cash margin needed for a trade. This increases the spread between the quote and hedge price.
  DisplayName=Margin
  Domain=double
  Mandatory=No
  Type=Input
  Value=0.0

Variable quoteAndHedgePriceRatio =
  Description=Price scaling factor between the quote and hedge leg
  DisplayName=Price Ratio
  Domain=double
  Type=ReadOnly
  Value=1.0 / quoteLegContractSize

Variable quoteAndHedgePriceSpread =
  Description=The price spread between the quote and hedge leg.
  DisplayName=Price Spread
  Domain=double
  Type=ReadOnly
  Value=switch(quoteLegBuyOrSell, \
      "Buy"->-(double((quoteLegStrikePrice / quoteAndHedgePriceRatio)) + quoteAndHedgeMargin), \
      "Sell"->-(double((quoteLegStrikePrice / quoteAndHedgePriceRatio)) - quoteAndHedgeMargin))

Variable quoteAndHedgeQuantityRatio =
  Description=Quantity scaling factor between the quote and hedge leg
  DisplayName=Quantity Ratio
  Domain=double
  Type=ReadOnly
  Value=1.0 / quoteLegContractSize

Variable quoteLegContractSize =
  Description=The Contract Size of the instrument
  DisplayName=Contract Size
  Domain=double
  Type=ReadOnly
  Value=quoteLegUsedOrderBook :* "contractSize"

Variable quoteLegStrikePrice =
  Description=The strike price of the quote leg.
  DisplayName=Strike Price
  Domain=double
  Type=ReadOnly
  Value=quoteLegUsedOrderBook.Instrument.StoredStrike(valuationDate)

<end>
