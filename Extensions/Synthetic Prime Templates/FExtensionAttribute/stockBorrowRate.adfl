[Synthetic Prime Templates]FInstrumentAndTrades:stockBorrowRate = switch(investedOpen >= 0.0, 
  true->instrument:securitySpreadLong [adsPriceDate = profitAndLossEndDate], 
  false->instrument:securitySpreadShort [adsPriceDate = profitAndLossEndDate]);
[Synthetic Prime Templates]FLeg:stockBorrowRate = spreadFixingRowObject:stockBorrowRate [spreadFixingDate, spreadInstrument = instrument];
[Synthetic Prime Templates]FPortfolioInstrumentAndTrades:stockBorrowRate = denominatedvalue(0.0, nil, nil, spreadFixingDate);