[Adaptiv FVA]FCombInstrMapAndTrades:thTPLWithFundingCurve = nil;
[Adaptiv FVA]FCreditBalance:thTPLWithFundingCurve = balancePortfolioInstrumentAndTrades:thTPLWithFundingCurve;
[Adaptiv FVA]FInstrumentAndTrades:thTPLWithFundingCurve = theoreticalPeriodValueWithFunding + cash;
[Adaptiv FVA]FLegAndTrades:thTPLWithFundingCurve = nil;
[Adaptiv FVA]FTimeBucketAndObject:thTPLWithFundingCurve = scenarioaxisarray(rowInstrumentAndTrades:thTPLWithFundingCurve [displayCurrency, profitAndLossSeparateHistorical := true, profitAndLossStartDate := longTimeAgo, profitAndLossEndDate = valuationBaseDate], timeDistributionPerimeterNames, <["timeDistributionBucket"], , , timeBucketCollection>, <"timeDistributionDateRule", , "fixedvariant", "TheoreticalValueProjectionDate">)[timeBucketCollectionIndex];