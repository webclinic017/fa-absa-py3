[PairOptionsPricerDealPackage]FInstrument:underlyingPriceInTheoreticalPriceTransformImpl = select(isReciprocalForUnderlyingPrice, 
  true->denominatedvalue(invBidAsk(arrayAny(underlyingPriceInTheoreticalPriceConverted), isBidAskPriced), underlyingForUnderlyingPriceInTheoreticalPrice:foreignCurrency, nil, datetime(underlyingPriceInTheoreticalPriceConverted)), 
  default->underlyingPriceInTheoreticalPriceConverted);