[PairOptionsPricerDealPackage]FInstrument:underlyingPriceInTheoreticalPriceInverseImpl = select(isReciprocal, 
  true->denominatedvalue(invBidAsk(arrayAny(underlyingPriceInTheoreticalPriceInvConverted), true), underlyingForUnderlyingPriceInTheoreticalPrice:domesticCurrency, nil, datetime(underlyingPriceInTheoreticalPriceInvConverted)), 
  default->underlyingForUnderlyingPriceInTheoreticalPrice:quoteConversionWrapperQuoteToUnitValue [quoteConversionWrapperFromQuote = underlyingPriceInTheoreticalPriceInverseVariable, quoteConversionWrapperFromQuotation = underlyingPriceInTheoreticalPriceQuotation, priceSource, isSplitAllGrouped]);