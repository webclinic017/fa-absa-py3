[Adaptiv XVA]FMultiInstrumentAndTrades:matchingMaximumPotentialFutureExposureValues = shunt(matchingCreditBalanceInstruments.Size == 1, 
  true->maxOf(matchingCreditBalanceInstruments :* "double(maximumPotentialFutureExposureValues)"));
[Adaptiv XVA]FSingleInstrumentAndTrades:matchingMaximumPotentialFutureExposureValues = shunt(matchingCreditBalanceInstruments.Size == 1, 
  false->nil, 
  true->maxOf(matchingCreditBalanceInstruments :* "double(maximumPotentialFutureExposureValues)"));