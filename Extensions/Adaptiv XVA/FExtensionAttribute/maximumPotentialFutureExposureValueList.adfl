[Adaptiv XVA]FInstrumentAndTrades:maximumPotentialFutureExposureValueList = shunt(calculatePotentialFutureExposureValue, 
  true->[maxPotentialFutureExposuresOnMultiplePencentiles :* "double(discountAndConvertToCurrency(object, theoreticalValueDisplayDateDiscountCurves, displayDate, theoreticalValueDisplayCurrencyFXRates, displayCurrencySymbol, filterUnit, theoreticalValueForwardDateBasisFXDiscountCurves, theoreticalValueForwardDateBasisFXRates, forwardDateBasisCurrencySymbol))" [theoreticalValueDisplayDateDiscountCurves, displayDate, theoreticalValueDisplayCurrencyFXRates, displayCurrencySymbol, filterUnit, theoreticalValueForwardDateBasisFXDiscountCurves, theoreticalValueForwardDateBasisFXRates, forwardDateBasisCurrencySymbol]].Flatten, 
  false->nil);